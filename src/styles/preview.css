/**
 * Preview Styles
 * Preview section, theme toggle, dark mode preview
 */

/* Preview Section */
.preview-section {
    background: #FFFFFF;
    padding: 32px;
    overflow: hidden;
    box-shadow: -2px 0 10px rgba(0,0,0,0.05);
}

.preview-section h2 {
    font-size: var(--font-size-2xl);
    font-weight: 700;
    letter-spacing: -0.01em;
    margin-bottom: 20px;
    color: #333333;
}

.preview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-sm);
}

.preview-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
}

/* Theme Toggle */
.theme-toggle {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    user-select: none;
}

.theme-toggle-label {
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: #374151;
    pointer-events: none;
}

.theme-toggle input[type="checkbox"] {
    /* Visually hidden but accessible to screen readers and automation */
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.toggle-slider {
    position: relative;
    width: 48px;
    height: 26px;
    background: #D1D5DB;
    border-radius: var(--radius-full);
    transition: background 0.2s ease-out, box-shadow 0.2s ease-out;
    flex-shrink: 0;
}

.theme-toggle:hover .toggle-slider {
    background: #9CA3AF;
}

.theme-toggle input:checked ~ .toggle-slider:hover {
    background: #1F2937;
}

.theme-toggle:focus-within .toggle-slider {
    outline: 2px solid var(--zoho-blue, #226DB4);  /* Neutral blue - consistent with form toggles */
    outline-offset: 2px;
}

.toggle-slider::before {
    content: '';
    position: absolute;
    top: 3px;
    left: 3px;
    width: 20px;
    height: 20px;
    background: #FFFFFF;
    border-radius: 50%;
    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.theme-toggle:hover .toggle-slider::before {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

.theme-toggle input:checked ~ .toggle-slider {
    background: #333333;
}

.theme-toggle input:checked ~ .toggle-slider::before {
    transform: translateX(22px);
}

/* Preview Container */
.preview-container {
    min-height: 300px;
    max-height: 500px;
    padding: 32px;
    border-radius: var(--radius-md);
    background: #FFFFFF;
    border: 1px solid #E0E0E0;
    transition: background var(--duration-expand) ease;
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    margin-bottom: 16px;
}

.preview-container.dark-mode {
    background: #1E1E1E;
    border-color: #555555;
}

/* Lighten accent-colored links for WCAG AA contrast (4.5:1) on #1E1E1E dark background.
   Only affects preview display â€” copied signature HTML retains original inline colors.
   data-accent attribute set by preview-renderer to enable per-color overrides. */
.preview-container.dark-mode .sig-link,
.preview-container.dark-mode .sig-separator {
    color: #F27476 !important; /* Zoho Red lightened: 5.08:1 on #1E1E1E */
}
.preview-container.dark-mode[data-accent="#089949"] .sig-link,
.preview-container.dark-mode[data-accent="#089949"] .sig-separator {
    color: #34D87E !important; /* Zoho Green lightened: 5.27:1 on #1E1E1E */
}
.preview-container.dark-mode[data-accent="#226DB4"] .sig-link,
.preview-container.dark-mode[data-accent="#226DB4"] .sig-separator {
    color: #5CA0E0 !important; /* Zoho Blue lightened: 4.68:1 on #1E1E1E */
}
.preview-container.dark-mode .sig-social-label {
    color: #B0B0B0 !important; /* 5.92:1 on #1E1E1E */
}

.signature-preview {
    font-family: Arial, Helvetica, sans-serif;
    max-width: 100%;
    transition: opacity 0.15s ease-out;
}

/* Subtle fade when content updates */
.signature-preview.updating {
    opacity: 0.7;
}

/* Dark Mode Warning */
.dark-mode-warning {
    font-size: var(--font-size-xs);
    color: #666666;
    margin-bottom: 16px;
    display: flex;
    align-items: flex-start;
    gap: 8px;
}

.dark-mode-warning-icon {
    font-size: var(--font-size-sm);
    flex-shrink: 0;
}

/* =============================================================================
   Responsive Adjustments for Lower Resolutions (1366x768)
   ============================================================================= */
@media (max-width: 1439px) and (min-width: 1280px) {
    /* Reduce preview section padding */
    .preview-section {
        padding: 20px; /* Down from 32px - saves 24px */
    }

    /* Reduce preview container padding */
    .preview-container {
        padding: 20px; /* Down from 32px - saves 24px */
    }

    /* Tighten design section spacing */
    .design-section {
        padding: 12px; /* Down from 16px - saves 8px */
    }

    /* Reduce step label margins */
    .step-label {
        margin-bottom: 8px; /* Down from 12px - saves 4px */
    }

    /* Tighten color switcher */
    .color-switcher {
        gap: 8px; /* Down from 12px - saves 4px per gap */
    }

    .color-btn {
        height: 32px; /* Down from 36px - saves 4px */
    }
}
